<!DOCTYPE html>
<html lang="en">
<head>
    <title>Log-In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-----------------------Firebase Links------------------------------------>
    <script src="https://cdn.firebase.com/js/client/2.4.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.7.2/firebase.js"></script>
    <!------------------------------------------------------------------------->

    <!-----------------------jQuery Framework------------------------------------------------->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
    <script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
    <!---------------------------------------------------------------------------------------->

    <!----------------APP LINKS----------------------->
    <link rel="stylesheet" href="CSS/communityapp.css">
    <script src="JS/rss-reader.js"></script>
    <script src="JS/jgfeed.js"></script>
    <script src="JS/communityapp.js"></script>
    <script src="JS/firebase-rtdatabase.js"></script>
    <script src="JS/subject_list.js"></script>
    <!----------------------------------------------->
</head>
<body>
<!--This page represents the LOGIN for the Community Leisure App and will be the FIRST page that the user is introduced to!-->

<!---------------------------------------------
-------------------LOG-IN----------------------
---------------------------------------------->

<div data-role="page" id="login">.

    <div data-role="header" data-add-back-btn="true">
        <h1 align="middle"> Log In</h1>
    </div>

    <div data-role="content">
        <ul data-role="listview" data-inset="true" data-theme="b">
            Email:<br>
            <input type="text" name="forename" value="">
            <br>
            Password:<br>
            <input type="password" name="surname" value="">
            <br>
            <li><a href="#home" id="btnLogIn" data-transition="fade">Log In</a></li>
        </ul>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------HOME PAGE-------------------
---------------------------------------------->

<div data-role="page" id="home">
    <div data-role="header" data-add-back-btn="true">
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
        <h1 align="middle">Community App</h1>
        <a href="#login" data-role="button" data-icon="alert" data-theme="a">Log In</a>
    </div>

    <div data-role="content" align="middle" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <li><a href="#sports" id="btnSports" data-transition="fade">Sports</a></li>
            <li><a href="#meetups" id="btnMeetups" data-transition="fade">Meet-Ups</a></li>
            <li><a href="#events" id="btnEvents" data-transition="fade">Events</a></li>
            <li><a href="#news" id="btnNews" data-transition="fade">News</a></li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" class="ui-bar" data-theme="a">
        <div><ul>
            <div align="right">
            </div>
            <li><a href="#panel" data-role="button" data-icon="info" class="ui-btn-left">About</a></li>
        </ul></div>
    </div>

    <div id="panel" data-role="panel">
        <p>Community Leisure App</p>
        <p>Fully customisable mobile application giving the user the ability to store information about their local area.</p>
        <p>Post anything varying from Sports, Meet-Ups, Events and even News in the area!</p>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <p align="middle">The application was developed by: <br> &copy; M. Chaudhry, S. Stewart & A. Williams, UWS </p>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------SPORTS----------------------
---------------------------------------------->

<div data-role="page" id="sports">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Sports</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <li><a href="#football" id="btnFootball" data-transition="fade">Football</a></li>
            <li><a href="#basketball" id="btnBasketball" data-transition="fade">Basketball</a></li>
            <li><a href="#athletics" id="btnAthletics" data-transition="fade">Athletics</a></li>
            <li><a href="#hockey" id="btnHockey" data-transition="fade">Field Hockey</a></li>
            <li><a href="#tennis" id="btnTennis" data-transition="fade">Tennis</a></li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------MEET UPS--------------------
---------------------------------------------->

<div data-role="page" id="meetups">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Meet-Ups</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <!--Meet-Ups will be inserted here-->
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Meet-Up</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------Events----------------------
---------------------------------------------->

<div data-role="page" id="events">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Events</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <!--Events will be inserted here-->
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------News------------------------
---------------------------------------------->

<!--PLEASE NOTE: Originally we were going to use a RSS feed to actually display the local news for a default location of
 Glasgow. But due to errors with the original jgfeed.js code, there were problems when actually retrieving the actual
 feed information from any RSS feed we got. Aware of this problem we browsed popular forums, StackOverflow etc. to check
 for any solutions but as of the submission for this mobile application there was no solution found. In this case, we
 have now retreated to the solution where the community can make it more local allowing them to post news of their local
 area themselves.-->

<div data-role="page" id="news">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>News</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <!--News will be inserted here-->
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add News</a>
    </div>
</div>

<!-------------------------------------------->

<!-- The following HTML now features the SPORTS section of the mobile app. For the purpose of testing the features of
adding events etc. we will have a default of roughly 4-5 sports. -->

<!---------------------------------------------
-------------------Football--------------------
---------------------------------------------->

<div data-role="page" id="football">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1 href="vfootball">Football</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">

            <li id="messages"></li>

            <!-- Examples of what will be added!
            <li>Team 1 vs Team 2 for 2pm Kick-Off, Monday @ The Pitch</li> -->
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#addEvent" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------Basketball------------------
---------------------------------------------->

<div data-role="page" id="basketball">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Basketball</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">

            <li id="Messages"></li>

            <!-- Examples of what will be added! -->
            <li>Team 1 vs Team 2 for 2pm Play-Off, Monday @ The Ball Court</li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#addEvent" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------Athletics-------------------
---------------------------------------------->

<div data-role="page" id="athletics">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Athletics</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">

            <li id="athleticsMessages"></li>

            <!-- Examples of what will be added! -->
            <li>100m Race at 10am, Monday @ The Running Track</li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#addEvent" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------Field Hockey----------------
---------------------------------------------->

<div data-role="page" id="hockey">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Field Hockey</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">

            <li id="hockeyMessages"></li>

            <!-- Examples of what will be added! -->
            <li>Team 1 vs Team 2 for 2pm Play-Off, Monday @ Hockey Pitch</li>
            <li>Team 1 vs Team 3 for 2pm Play-Off, Tuesday @ Hockey Pitch</li>
            <li>Team 2 vs Team 3 for 2pm Play-Off, Wednesday @ Hockey Pitch</li>
            <li>Team 4 vs Team 5 for 2pm Play-Off, Thursday @ Hockey Pitch</li>
            <li>Team 4 vs Team 6 for 2pm Play-Off, Friday @ Hockey Pitch</li>
            <li>Team 5 vs Team 6 for 2pm Play-Off, Saturday @ Hockey Pitch</li>
            <li>Team 1 vs Team 6 for 2pm Play-Off, Sunday @ Hockey Pitch</li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#addEvent" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!---------------------------------------------
-------------------Tennis----------------------
---------------------------------------------->

<div data-role="page" id="tennis">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a">Back</a>
        <h1>Tennis</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">

            <li id="tennisMessages"></li>

            <!-- Examples of what will be added! -->
            <li>Team 1 vs Team 2 for 2pm, Monday @ Tennis Court</li>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#addEvent" data-role="button" data-icon="plus" data-direction="reverse" data-theme="a">Add New Event</a>
    </div>
</div>

<!-------------------------------------------->

<!-- Now, the following code is going to show the HTML for adding an event for a selected category

<!---------------------------------------------
-----------------ADDING EVENT------------------
---------------------------------------------->

<div data-role="page" id="addEvent">
    <div data-role="header" data-add-back-btn="true">
        <a href="#" data-role="button" data-icon="back" data-rel="back" data-theme="a" id="eventBack">Back</a>
        <h1>Add Event</h1>
        <a href="#home" data-role="button" data-icon="home" data-theme="a" id="eventHome">Home</a>
    </div>

    <div data-role="content" data-theme="a">
        <ul data-role="listview" data-inset="true" data-theme="b">
            <form action="/action_page.php">
                <li><label for="topic">Topic:</label></li>
                <li><input type="text" name="subject" size="12" placeholder="Enter topic..." id="topic"/></li>

                <br>

                <li><select id="category">
                 <option value="">(Please Select A Category)</option>                    
                    <optgroup label="Sports">
                        <option value="vFootball" id="catFootball">Football</option>
                        <option value="vBasketball" id="catBasket">Basketball</option>
                        <option value="vAthletics" id="catAthletics">Athletics</option>
                        <option value="vFieldHockey" id="catFieldHockey">Field Hockey</option>
                        <option value="vTennis" id="catTennis">Tennis</option>
                    </optgroup>                 
                    
                    <option value="vMeetups" id="catMeetups">Meet-Ups</option>
                    <option value="vEvents" id="catEvents">Events</option>
                    <option value="vNews" id="catNews">News</option>                      
                        
                        
                        
                </select></li>

                <br>

                <li><label for="activity">Activity:</label></li>
                <li><input type="text" name="activity" size="12" placeholder="Enter activity..." id="activity"/></li>

                <li><label for="location">Location:</label></li>
                <li><input type="text" name="location" size="12" placeholder="Enter location..." id="location"/></li>

                <li><label for="time">Time:</label></li>
                <li><input type="time" name="time" size="12" placeholder="Enter time in --:-- format..." id="time"/></li>

                <li><label for="additionalInfo">Additional Information:</label></li>
                <li><textarea name="additionalInfo" cols="20" rows="4" maxlength="150" id="additionalInfo" placeholder="Max 150 characters"></textarea></li>
            </form>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed" align="right">
        <a href="#" data-role="button" data-icon="delete" data-theme="a" id="clear" style="float: left;">Clear</a>
        <a href="#" data-role="button" data-icon="check" data-direction="reverse" data-theme="a" id="submit">Submit</a>
    </div>
</div>



</body>

<!-- In order for the messages to actually appear appropriately throughout the app, we had to move the following code
from the JavaScript file to the HTML as we were getting an error saying;
                    "Cannot read property 'appendChild' of null"
According to research on StackOverflow the cause of this is because the JavaScript is running before the actual HTML has
finished loading, therefore we moved it in the following <script> to then stop this error. The solution to this problem
can be found at: http://stackoverflow.com/questions/8670530/javascript-error-cannot-call-method-appendchild-of-null -->

<script>

    var fb = new Firebase("https://community-leisure-mobile-app.firebaseio.com/"),
        //fbMessages = fb.child("/messages");
    messages_area = document.getElementById("messages");

    if (fb) {
        //This gets a reference to the 'location' node.
        var fbMessages = fb.child("/messages");
        //Now we can install event handlers for nodes added, changed and removed.
        fbMessages.on('child_added', function(snapshot){
            var data = snapshot.val();
            //console.dir({'added': data});
        });
    }

    function postMessage(topic, category, activity, location, time, additionalInfo) {
        fbMessages.push({
            topic: topic,
            category: category,
            activity: activity,
            location: location,
            time: time,
            additionalInfo: additionalInfo,
            timestamp: Firebase.ServerValue.TIMESTAMP
        });
    }

    function showMessage(key, data){
        messages_area.appendChild(formatMessage(key, data));
    }

    //COME BACK HERE TO APPROPRIATELY FORMAT THE OUTPUT
    function formatMessage(key, data){
        var li = document.createElement("li");
        //var currentPage == 
        var locationnnn = document.getElementById("h1");
        
        
        if(data.category ==  "vFootball"){
                    li.innerHTML = "<p>" + data.topic +  "</p><p>" + data.activity + " at " + data.location + " at " + data.time + "." + " " + data.additionalInfo + "</p><br>";
        //li.innerHTML = "<h1>" + data.topic + "</h1><p>" + data.category + data.activity + data.location + data.time + data.additionalInfo + "</p>" + "</li>";
        //li.innerHTML = "<h3>" + data.message + "</h3><p>Posted by:" + data.topic + "</p>";
        li.setAttribute("id", key);
        return li;
        }
                

    }

    fbMessages.on('child_added', function (snapshot) {
        var data = snapshot.val(),
            key = snapshot.key();
        console.dir({'added': data});
        messages[key] = data;
        showMessage(key, data);
    });

</script>

</html>
